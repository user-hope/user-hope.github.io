import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,a as n,b as a,d as t,e as p}from"./app-9b0cd270.js";const u={},i=n("h2",{id:"owl",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#owl","aria-hidden":"true"},"#"),a(" OWL")],-1),k={href:"https://github.com/odoo/owl/blob/master/doc/readme.md",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/odoo/owl",target:"_blank",rel:"noopener noreferrer"},r=p(`<h2 id="使用-owl-组件" tabindex="-1"><a class="header-anchor" href="#使用-owl-组件" aria-hidden="true">#</a> 使用 OWL 组件</h2><p>下面来看一下如何定义一个 owl 组件;</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token operator">=</span> owl<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token operator">=</span> owl<span class="token punctuation">.</span>hooks<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> xml <span class="token punctuation">}</span> <span class="token operator">=</span> owl<span class="token punctuation">.</span>tags<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">static</span> template <span class="token operator">=</span> xml<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
        &lt;div t-on-click=&quot;increment&quot;&gt;
            &lt;t t-esc=&quot;state.value&quot;&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
    
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的示例中, 我们从全局 <code>owl</code> 对象中引入 <code>Component</code>, 可以像大多数的库一样使用; 然后使用 <code>xml</code> 帮助函数将 xml 模板定义在 js 代码中; 这对少量的 xml 代码是比较友好的, 如果代码量比较多, 字符串的 xml 就很难维护了, 因此, odoo 支持将 xml 文件定义在 QWeb 模板中, 以便可以翻译它们;</p><p>实际上, 大多数组件应定义在同一个目录的 2-3 个文件: (<code>component.js</code>, <code>component.xml</code>, <code>component.scss</code>); 然后将这些文件添加到 <code>assets</code> 的 <code>bundle</code> 中, web 框架负责加载这些文件;</p><p>例如:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token operator">=</span> owl<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token operator">=</span> owl<span class="token punctuation">.</span>hooks<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> xml <span class="token punctuation">}</span> <span class="token operator">=</span> owl<span class="token punctuation">.</span>tags<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">static</span> template <span class="token operator">=</span> <span class="token string">&#39;myaddon.MyComponent&#39;</span><span class="token punctuation">;</span>
  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>templates</span> <span class="token attr-name"><span class="token namespace">xml:</span>space</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preserve<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myaddon.MyComponent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">t-on-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-esc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.value<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>templates</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>odoo 的前端框架还尚未完全使用 owl 来编写, 因此需要一种方法来区分 owl 模板还是普通的 QWeb 模板, 为了是向后兼容; 所以新模板都需要 <code>owl=&quot;1&quot;</code> 来标记当前模板作用域 owl;</p><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践" aria-hidden="true">#</a> 最佳实践</h2><p>首先, 组件是 class 类, 因此它们有一个构造函数, 但是 <code>constructor</code> 构造函数是 JavaScript 中特殊的方法, 不能以任何方式重写; 因此, 在 odoo 使用的是 <code>setup</code> 钩子来模拟 <code>constructor</code>:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 正确的写法</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// init</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 错误的写法</span>
<span class="token keyword">class</span> <span class="token class-name">IncorrectComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// init</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="内置组件" tabindex="-1"><a class="header-anchor" href="#内置组件" aria-hidden="true">#</a> 内置组件</h2><p>odoo 的 web 客户端是使用的 owl 组件构建的, 为了简化起见, odoo JavaScript 框架提供了一套组件, 可以在某些常见情况下重复使用, 下面是 odoo 中内置的一些组件:</p><h3 id="actionswiper" tabindex="-1"><a class="header-anchor" href="#actionswiper" aria-hidden="true">#</a> ActionSwiper</h3><p>源代码: <code>addons/web/static/src/core/action_swiper/action_swiper.js</code>, 引入方式: <code>@web/core/action_swiper/action_swiper</code>;</p><p>这是一个滑动操作组件, 当用户滑动到某一个阈值的时候就会出现操作按钮;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>templates</span> <span class="token attr-name"><span class="token namespace">xml:</span>space</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preserve<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>web.CalendarRenderer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>o_calendar_renderer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ActionSwiper</span> <span class="token attr-name">t-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionSwiperProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span>
                    <span class="token attr-name">t-component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>calendarComponent<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">t-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">t-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>calendarKey<span class="token punctuation">&quot;</span></span>
                <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ActionSwiper</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>templates</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用该组件的最简单方法是直接在 xml 模板中使用它; 此外还可以有条件的添加属性来管理元素何时可以滑动, 以及动画执行, 或者是操作所需的最小距离;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ActionSwiper</span>
    <span class="token attr-name">onRightSwipe</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span> hasRightSwipe() ? {
        action: onRightSwipe.bind(this),
        icon: &#39;fa-delete&#39;,
        bgColor: &#39;bg-danger&#39;,
    } : undefined<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">onLeftSwipe</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span> hasLeftSwipe() ? {
        action: onLeftSwipe.bind(this),
    } : undefined<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">animationOnMove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">animationType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>forwards&#39;<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">swipeDistanceRatio</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        Swiper item
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ActionSwiper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中可选的 props 有以下属性:</p><ul><li><strong><code>animationOnMove</code></strong>: Boolean, 滑动时候是否添加动画效果;</li><li><strong><code>animationType</code></strong>: String, 滑动的时候动画类型 ( <code>bounce</code>, <code>forwards</code> );</li><li><strong><code>onLeftSwipe</code></strong>: Object, 如果设置了, 开启左滑动效果;</li><li><strong><code>onRightSwipe</code></strong>: Object, 如果设置了, 开启右滑动效果;</li><li><strong><code>swipeDistanceRatio</code></strong>: Number, 最小滑动间距的设备比;</li></ul><p>其中, <code>onLeftSwipe</code>, <code>onRightSwipe</code> 可以传入 Object, 支持的键有:</p><ul><li><strong><code>action</code></strong>: 给定方向的滑动完成之后执行的回调函数;</li><li><strong><code>icon</code></strong>: icon;</li><li><strong><code>bgColor</code></strong>: 背景颜色; 遵循 bootstrap 的颜色预设; (<code>danger</code>, <code>info</code>, <code>secondary</code>, <code>success</code> or <code>warning</code>);</li></ul><p>示例: 扩展现有的组件功能; 例如: 在邮件列表中, 将邮件标记为已读:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//*[hasclass(&#39;o_Message&#39;)]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ActionSwiper</span>
                <span class="token attr-name">onRightSwipe</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>messaging.device.isMobile and messageView.message.isNeedaction ?
        {
            action: () =&gt; messageView.message.markAsRead(),
            icon: &#39;fa-check-circle&#39;,
            bgColor: &#39;bg-success&#39;,
        } : undefined<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//ActionSwiper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inside<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//*[hasclass(&#39;o_Message&#39;)]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>move<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="checkbox" tabindex="-1"><a class="header-anchor" href="#checkbox" aria-hidden="true">#</a> CheckBox</h3><p>源代码: <code>addons/web/static/src/core/checkbox/checkbox.js</code>, 引入方式: <code>@web/core/checkbox/checkbox</code>;</p><p>这是一个简单的复选框组件, 带有标签, 当标签点击的时候, 将切换复选框的状态;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-on-change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onValueChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Some Text
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CheckBox</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>odoo 中的 bool 字段就是使用它来包装的;</p><h3 id="colorlist" tabindex="-1"><a class="header-anchor" href="#colorlist" aria-hidden="true">#</a> ColorList</h3><p>源代码: <code>addons/web/static/src/core/colorlist/colorlist.js</code>, 引入方式: <code>@web/core/colorlist/colorlist</code>;</p><p>可以从预定义的列表中选择颜色, 默认情况下, 该组件显示当前选定的颜色, 并且如果没有设置 <code>canToggle</code> props, 该组件是不允许扩展的;</p><p>可选属性:</p><ul><li><strong><code>canToggle</code></strong>: Boolean, 是否允许操作, 切换颜色;</li><li><strong><code>colors</code></strong>: Array, 要显示在列表中的颜色, 每一种颜色都有独立的 id;</li><li><strong><code>forceExpanded</code></strong>: Boolean, 如果设置为 true, 则默认展开选项;</li><li><strong><code>isExpanded</code></strong>: Boolean, 如果设置为 true, 则默认展开状态;</li><li><strong><code>onColorSelected</code></strong>: function, 颜色选择点击的回调函数;</li><li><strong><code>selectedColor</code></strong>: number, 选中的颜色的 id;</li></ul><p>id 的规则为:</p><table><thead><tr><th>id</th><th>color</th></tr></thead><tbody><tr><td>0</td><td><code>No color</code></td></tr><tr><td>1</td><td><code>Red</code></td></tr><tr><td>2</td><td><code>Orange</code></td></tr><tr><td>3</td><td><code>Yellow</code></td></tr><tr><td>4</td><td><code>Light blue</code></td></tr><tr><td>5</td><td><code>Dark purple</code></td></tr><tr><td>6</td><td><code>Salmon pink</code></td></tr><tr><td>7</td><td><code>Medium blue</code></td></tr><tr><td>8</td><td><code>Dark blue</code></td></tr><tr><td>9</td><td><code>Fuchsia</code></td></tr><tr><td>12</td><td><code>Green</code></td></tr><tr><td>11</td><td><code>Purple</code></td></tr></tbody></table><h3 id="dropdown" tabindex="-1"><a class="header-anchor" href="#dropdown" aria-hidden="true">#</a> Dropdown</h3><p>源代码: <code>addons/web/static/src/core/dropdown/dropdown.js</code>, 引入方式: <code>@web/core/dropdown/dropdown</code> and <code>@web/core/dropdown/dropdown_item</code></p><p>下拉菜单是非常的复杂的, 它要提供许多的功能, 例如:</p><ul><li>切换选项;</li><li>当一个下拉菜单打开的时候, 在悬停状态切换其他的 item;</li><li>点击空白的地方可以关闭;</li><li>选择 item 之后关闭下拉菜单;</li><li>点击 item 的时候执行回调函数;</li><li>支持多层级嵌套下拉;</li><li>自由设计下拉内容;</li><li>可配置热键, 用于关闭/打开下拉列表;</li><li>每当页面滚动或调整大小时, 都会重新定位自身;</li><li>自动识别它应该在哪个方向打开;</li></ul><p>为了一劳永逸的解决这些问题, odoo 框架为每个下拉元素提供了两个组件: <code>Dropdown</code>, <code>DropdownItem</code>;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span> <span class="token attr-name">t-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>printItems.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>d-inline-block&#39;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">togglerClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>btn btn-light&#39;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hotkey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>shift+u&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>me-md-1 fa fa-print<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>o_dropdown_title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Print<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-foreach</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>printItems<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.key<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>o_menu_item&#39;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-esc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.description<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;Dropdown /&gt;</code> 组件只是一个简单的 <code>&lt;div class=&quot;dropdown&quot; /&gt;</code> 和一个 <code>&lt;button class=&quot;dropdown-toggle&quot;/&gt;</code> 的按钮组成, 由按钮控制下拉菜单是否展示;</p><p><code>Dropdown</code> 组件可选参数有:</p><ul><li><strong><code>startOpen</code></strong>: boolean, 下拉菜单的初始化打开状态, 默认为 false;</li><li><strong><code>menuClass</code></strong>: string, 应用与 dropdown 元素的其他的 css 类名;</li><li><strong><code>togglerClass</code></strong>: string, 应用与 dropdown button 元素的其他的 css 类名;</li><li><strong><code>hotkey</code></strong>: string, 键盘呼出菜单的热键;</li><li><strong><code>tooltip</code></strong>: string, 显示在下拉菜单中的提示文本;</li><li><strong><code>beforeOpen</code></strong>: function, 在打开菜单之前调用的钩子函数, 可以是异步函数;</li><li><strong><code>manualOnly</code></strong>: boolean, 如果设置为 true, 仅在单击按钮时候切换下拉列表;</li><li><strong><code>title</code></strong>: string, button 按钮的标题属性, 默认为 none;</li><li><strong><code>position</code></strong>: string, 菜单的打开位置, 有效的 usePosition 钩子; 默认为 <code>bottom-start</code>;</li><li><strong><code>toggler</code></strong>: <code>parent</code> or <code>undefined</code>, 当设置为 <code>parent</code> 的时候, <code>&lt;button class=&quot;dropdown-toggle&quot;/&gt;</code> 不显示; 切换功能由父节点处理; 默认值 <code>undefined</code>;</li></ul><p>当选择 <code>&lt;DropdownItem /&gt;</code> 的时候, 它会调用 <code>DropdownItem</code> 提供的 <code>onSelected</code> 方法;</p><p><code>DropdownItem</code> 组件可选参数:</p><ul><li><strong><code>onSelected</code></strong>: function, 节点被选中的时候调用的回调函数;</li><li><strong><code>parentClosingMode</code></strong>: <code>none</code> | <code>closest</code> | <code>all</code>, 选择后, 将控制关闭的父级下拉列表; 默认值为 <code>all</code>;</li><li><strong><code>hotkey</code></strong>: string, 选择下拉项的热键;</li><li><strong><code>href</code></strong>: string, 如果设置这个属性, DropdownItem 将渲染为 <code>&lt;a href=&quot;value&quot; class=&quot;dropdown-item&quot;/&gt;</code> 而不是 <code>&lt;span class=&quot;dropdown-item&quot;/&gt;</code>;</li><li><strong><code>title</code></strong>: string, 可选的 title 属性, 该属性将传递给 DropdownItem 的根节点;</li><li><strong><code>dataset</code></strong>: Object, 包含应添加到根元素数据集的值的可选对象. 这可以使用它来更容易以编程方式找到该元素;</li></ul><h4 id="说明文档" tabindex="-1"><a class="header-anchor" href="#说明文档" aria-hidden="true">#</a> 说明文档</h4><p><code>&lt;Dropdown /&gt;</code> 组件渲染后的 dom 结构如下:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropdown<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropdown-toggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click me !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 下面的元素是否出现在 dom 中取决于按钮的控制状态 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropdown-menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropdown-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Menu Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropdown-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Menu Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,53),g=n("code",null,"<Dropdown/>",-1),v={href:"https://github.com/odoo/owl/blob/master/doc/reference/slots.md",target:"_blank",rel:"noopener noreferrer"},m=p(`<ul><li><strong><code>toggler</code></strong>: 它包含下拉列表的 <code>Toggler</code> 元素, 并在下拉按钮内呈现;</li><li><strong><code>default</code></strong>: 它包含下拉菜单本身的元素, 并在 <code>&lt;div class=&quot;dropdown-menu&quot;/&gt;</code> 中呈现. 尽管这不是强制性的, 但菜单槽内通常至少有一个 <code>DropdownItem</code>;</li></ul><p>当多个下拉列表在 DOM 中共享相同的父元素时, 它们将被视为组的一部分, 并将相互通知其状态更改. 这意味着当其中一个下拉列表打开时, 其他下拉列表将在鼠标悬停时自动打开, 而无需单击;</p><h4 id="示例-同级下拉菜单" tabindex="-1"><a class="header-anchor" href="#示例-同级下拉菜单" aria-hidden="true">#</a> 示例: 同级下拉菜单</h4><p>当单击一个下拉列表的时候, 其他的下拉菜单在悬停时自动打开:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>File<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-open&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Open<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-new-document&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-new-spreadsheet&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New Spreadsheet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;edit-undo&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Undo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;edit-redo&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Redo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;edit-find&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Search<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;about-help&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Help<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;about-update&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Check update<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="示例-多级下拉菜单" tabindex="-1"><a class="header-anchor" href="#示例-多级下拉菜单" aria-hidden="true">#</a> 示例: 多级下拉菜单</h4><p>使用 <code>t-call</code> 制作 &quot;文件&quot; 下拉菜单, 并且将 &quot;新建&quot; 和 &quot;保存&quot; 作为子菜单展示;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.Dropdown.File<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>File<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-open&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Open<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-call</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.Dropdown.File.New<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-save&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Save<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-call</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.Dropdown.File.Save.As<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.Dropdown.File.New<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-new-document&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-new-spreadsheet&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Spreadsheet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.Dropdown.File.Save.As<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Save as...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-save-as-csv&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>CSV<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-save-as-pdf&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>PDF<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="多级下拉列表嵌套" tabindex="-1"><a class="header-anchor" href="#多级下拉列表嵌套" aria-hidden="true">#</a> 多级下拉列表嵌套</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>File<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-open&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Open<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-new-document&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-new-spreadsheet&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Spreadsheet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-save&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Save<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Save as...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-save-as-csv&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>CSV<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(&#39;file-save-as-pdf&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>PDF<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DropdownItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="示例-递归多级下拉列表" tabindex="-1"><a class="header-anchor" href="#示例-递归多级下拉列表" aria-hidden="true">#</a> 示例: 递归多级下拉列表</h4><p>递归调用模板以显示树状结构;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.MainTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-call</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.RecursiveDropdown<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>Main Menu&#39;<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.menuItems<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.RecursiveDropdown<span class="token punctuation">&quot;</span></span> <span class="token attr-name">owl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-esc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-foreach</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 如果没有子菜单, 将渲染为 &lt;DropdownItem/&gt; --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!item.childrenTree.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DropdownItem</span> <span class="token attr-name">onSelected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; this.onItemSelected(item)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-esc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 否则递归调用自己 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-else</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-call</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addon.RecursiveDropdown<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">t-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.childrenTree<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="notebook" tabindex="-1"><a class="header-anchor" href="#notebook" aria-hidden="true">#</a> Notebook</h3><p>源代码: <code>addons/web/static/src/core/notebook/notebook.js</code>, 引入方式: <code>@web/core/notebook/notebook</code>;</p><p><code>Notebook</code> 组件用于在选项卡式的界面中显示多个页面, 选项卡可以位于元素的顶部以水平显示, 也可以位于左侧, 以垂直布局;</p><p>有两种方法可以定义要实例化的 <code>Notebook</code> 页面, 一种是使用 <code>slot</code>, 另一种是传递专用的 <code>props</code></p><p><code>Notebook</code> 接收以下参数:</p><ul><li><strong><code>anchors</code></strong>: object, 可选, 允许锚点导航到选项卡内不可见的元素;</li><li><strong><code>className</code></strong>: string, 可选, 设置根节点的 class name;</li><li><strong><code>defaultPage</code></strong>: string, 可选, page 页面的 id, 如果设置了, 就默认展示指定的 page 页面;</li><li><strong><code>orientation</code></strong>: string, 可选, 组件在页面上的展示方式, <code>horizontal</code> or <code>vertical</code>;</li><li><strong><code>onPageUpdate</code></strong>: function, 可选, page 页面切换的时候执行的回调函数;</li><li><strong><code>pages</code></strong>: array, 可选, 包含要从模板填充的页面列表;</li></ul><p>第一种方式是使用 slot:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Notebook</span> <span class="token attr-name">orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>vertical&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page_1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>Page 1&#39;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">isVisible</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>My First Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>It&#39;s time to build Owl components. Did you read the documentation?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>t</span> <span class="token attr-name">t-set-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page_2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>2nd page&#39;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">isVisible</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Wise owl&#39;s silent flight. Through the moonlit forest deep, guides my path to code<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>t</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Notebook</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二种方式是通过 props 传递:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Notebook <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@web/core/notebook/notebook&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyTemplateComponent</span> <span class="token keyword">extends</span> <span class="token class-name">owl<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> template <span class="token operator">=</span> owl<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>xml<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
        &lt;h1 t-esc=&quot;props.title&quot; /&gt;
        &lt;p t-esc=&quot;props.text&quot; /&gt;
    </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">owl<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">static</span> template <span class="token operator">=</span> owl<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>xml<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
        &lt;Notebook defaultPage=&quot;&#39;page_2&#39;&quot; pages=&quot;pages&quot; /&gt;
    </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
    
    <span class="token keyword">get</span> <span class="token function">pages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">Component</span><span class="token operator">:</span> MyTemplateComponent<span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Page 1&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;My First Page&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;This page is not visible&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">Component</span><span class="token operator">:</span> MyTemplateComponent<span class="token punctuation">,</span>
                <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;page_2&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Page 2&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;My second page&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;You&#39;re at the right place!&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pager" tabindex="-1"><a class="header-anchor" href="#pager" aria-hidden="true">#</a> Pager</h3><p>源代码: <code>addons/web/static/src/core/pager/pager.js</code>, 引入方式: <code>@web/core/pager/pager</code>;</p><p><code>Pager</code> 是处理分页的一个小组件, 页面由 <code>offset</code> 和 <code>limit</code> 限制数据量大小; <code>Pager</code> 组件可以在任何地方使用, 但其主要作用是控制面板中;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Pager</span> <span class="token attr-name">offset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">limit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80<span class="token punctuation">&quot;</span></span> <span class="token attr-name">total</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onUpdate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doSomething<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>Pager</code> 组件接收以下 props:</p><ul><li><strong><code>offset</code></strong>: number, 数据里面的第一条的索引, 它以 0 开头, pager 展示的时候会 <code>offset + 1</code>;</li><li><strong><code>limit</code></strong>: number, 页面大小, 偏移量和限制的总和对应于页面最后一个元素的索引;</li><li><strong><code>total</code></strong>: number, 页面可以访问的元素总数;</li><li><strong><code>onUpdate</code></strong>: function, 当 pager 的分页改变的时候执行的回调函数;</li><li><strong><code>isEditable</code></strong>: boolean, 允许单击当前页面进行编辑, 默认为 true;</li><li><strong><code>withAccessKey</code></strong>: boolean, 在默认情况下, 将访问键 <code>p</code> 绑定到上一页按钮, 将访问键 <code>n</code> 绑定到下一页按钮;</li></ul>`,29);function b(q,w){const s=o("ExternalLinkIcon");return c(),l("div",null,[i,n("p",null,[a("odoo 的 JavaScript 框架使用名为 OWL 的自定义组件框架, 它是一个声明式的组件系统, 受 Vue 和 React 框架的启发, OWL 也是数据驱动, 响应式系统; 组件是使用 QWeb 模板定义的, 并添加了一些 OWL 特定的指令; 具体文档请参考 "),n("a",k,[a("Owl"),t(s)])]),n("blockquote",null,[n("p",null,[a("尽管在 web 模块中可以找到 owl 的源代码, 但是它是从单独的 github 仓库维护的, 因此, 应通过 "),n("a",d,[a("owl"),t(s)]),a(" 获取最新的修改;")])]),r,n("p",null,[a("要正确的使用 "),g,a(" 组件, 需要传入两个 "),n("a",v,[a("slot"),t(s)])]),m])}const f=e(u,[["render",b],["__file","OWL Components.html.vue"]]);export{f as default};
